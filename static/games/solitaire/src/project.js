require=function t(e,i,n){function a(r,c){if(!i[r]){if(!e[r]){var s="function"==typeof require&&require;if(!c&&s)return s(r,!0);if(o)return o(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){var i=e[r][1][t];return a(i||t)},u,u.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)a(n[r]);return a}({Ads:[function(t,e,i){"use strict";function n(){this._homeBanner="home",this._gameOverAd="gameover",this._rewardAd="rewarded",this.debugLogFunction=null}cc._RF.push(e,"254d2Lz0OdKrZcyxWcxTbyn","Ads"),n.prototype.initialize=function(){if(cc.sys.isMobile&&sdkbox&&sdkbox.PluginAdMob){var t=this,e=sdkbox.PluginAdMob;e.setListener({adViewDidReceiveAd:function(i){t.log("adViewDidReceiveAd: "+i),i===t._homeBanner&&e.show(i)},adViewDidFailToReceiveAdWithError:function(e,i){t.log("adViewDidFailToReceiveAdWithError -> name: "+e+", msg: "+i)},adViewWillPresentScreen:function(e){t.log("adViewWillPresentScreen: "+e)},adViewDidDismissScreen:function(i){t.log("adViewDidDismissScreen: "+i),e.cache(i)},adViewWillDismissScreen:function(e){t.log("adViewWillDismissScreen: "+e)},adViewWillLeaveApplication:function(e){t.log("adViewWillLeaveApplication: "+e)},reward:function(e,i,n){t.log("reward -> name: "+e+", currency: "+i+", amount: "+n)}}),e.init(),this.log("initialize AdMob plugin")}},n.prototype.showInterstitial=function(){cc.sys.isMobile&&(this.log("show interstitial ad"),sdkbox.PluginAdMob.show(this._gameOverAd))},n.prototype.log=function(t){this.debugLogFunction&&this.debugLogFunction(t)},e.exports=n,cc._RF.pop()},{}],CardPrefab:[function(t,e,i){"use strict";cc._RF.push(e,"f3e06w2K9NINoJahJYKnY8O","CardPrefab");var n=t("CardSuite");cc.Class({extends:cc.Component,ctor:function(){},properties:{cardPic:cc.Sprite,cardBack:cc.Sprite,cardFrames:{default:[],type:cc.SpriteFrame},shadowVisible:{type:cc.Boolean,get:function(){return!!this._shadowNode&&this._shadowNode.active},set:function(t){this._shadowNode&&(this._shadowNode.active=t)}},shadow2Visible:{type:cc.Boolean,get:function(){return!!this._shadow2Node&&this._shadow2Node.active},set:function(t){this._shadow2Node&&(this._shadow2Node.active=t)}}},onLoad:function(){this.cardPic.node.width=86,this.cardPic.node.height=118,this.cardBack.node.width=86,this.cardBack.node.height=118,this._shadowNode=this.node.getChildByName("cardShadow"),this._shadowNode.width=86,this._shadowNode.height=118,this._shadowNode.active=!1,this._shadow2Node=this.node.getChildByName("cardShadow2"),this._shadow2Node.width=86,this._shadow2Node.height=118,this._shadow2Node.active=!1,this._animation=this.getComponent(cc.Animation)},init:function(t,e){this.node.x=0,this.node.y=0,this.cardPic.spriteFrame=this.cardFrames[t],this._particleSys=null;var i=null;switch(e){case n.DIAMONDS:i=this.cardPic.node.getChildByName("fx_diamond");break;case n.CLUBS:i=this.cardPic.node.getChildByName("fx_club");break;case n.HEARTS:i=this.cardPic.node.getChildByName("fx_heart");break;case n.SPADES:i=this.cardPic.node.getChildByName("fx_spade")}i&&(i.active=!0,this._particleSys=i.getComponent(cc.ParticleSystem))},emitParticles:function(){this._particleSys&&this._particleSys.resetSystem()},play:function(t,e,i){if(this._animation){var n=this._animation.play(t);this.scheduleOnce(function(){e&&e.call(i)},n.duration)}}}),cc._RF.pop()},{CardSuite:"CardSuite"}],CardSprite:[function(t,e,i){"use strict";cc._RF.push(e,"5a5464oH8pCoItOwYxWaSJb","CardSprite");var n=t("Card"),a=t("CardSuite"),o=cc.Class({extends:cc.Component,ctor:function(){this._card=null,this._prefab=null,this._cardPrefab=null,this._helperP=cc.p(0,0);var t=new cc.Node("CardSprite");this.node=t},statics:{animating:!1},properties:{dealMoveX:0,dealMoveY:0,pileX:0,pileY:0,card:{type:n,get:function(){return this._card},set:function(t){if(this._card=t,this._cardPrefab&&this.card){var e=[a.SPADES,a.CLUBS,a.HEARTS,a.DIAMONDS];this._cardPrefab.init(13*e.indexOf(this.card.suite)+this.card.rank-1,this.card.suite)}}},prefab:{type:cc.Node,get:function(){return this._prefab},set:function(t){if(this._prefab=t,this.node.addChild(this._prefab),this._cardPrefab=this._prefab.getComponent("CardPrefab"),this.card){var e=[a.SPADES,a.CLUBS,a.HEARTS,a.DIAMONDS];this._cardPrefab.init(13*e.indexOf(this.card.suite)+this.card.rank-1,this.card.suite)}}},parent:{type:cc.Node,get:function(){return this.node.parent},set:function(t){this.node.parent=t}},width:{type:cc.Integer,get:function(){return this._cardPrefab?this._cardPrefab.cardBack.node.width:0}},height:{type:cc.Integer,get:function(){return this._cardPrefab?this._cardPrefab.cardBack.node.height:0}},x:{get:function(){return this.node.x},set:function(t){this.node.x=t},type:cc.Integer},y:{get:function(){return this.node.y},set:function(t){this.node.y=t},type:cc.Integer},visible:{get:function(){return this.node.active},set:function(t){this.node.active=t},type:cc.Boolean},zOrder:{type:cc.Integer,get:function(){return this.node.getLocalZOrder()},set:function(t){this.node.setLocalZOrder(t)}}},flip:function(t,e,i){if(void 0!==t&&null!==t||(t=!1),this._card){var n=t?"card_flip_reverse":"card_flip";o.animating=!0,this._cardPrefab.play(n,function(){o.animating=!1,e&&e.call(i)},this)}else this._cardPrefab.cardPic.node.active=!1,this._cardPrefab.cardBack.node.active=!0},moveTo:function(t,e,i,n,a,r,c){i=i||1,c=c||0,o.animating=!0,this._helperP.x=t,this._helperP.y=e;var s=cc.moveTo(i,this._helperP);this.node.runAction(cc.sequence(cc.delayTime(c),s,cc.callFunc(function(){o.animating=!1,this.x=this.pileX,this.y=this.pileY,n&&n.apply(a,r)},this)))},shake:function(t,e){o.animating=!0,this._cardPrefab.play("card_shake",function(){o.animating=!1,t&&t.call(e)},this)},shadowVisible:function(t){void 0!==t&&null!==t||(t=!1),this._cardPrefab.shadowVisible=t},shadow2Visible:function(t){void 0!==t&&null!==t||(t=!1),this._cardPrefab.shadow2Visible=t},playFx:function(){this._cardPrefab.emitParticles()},on:function(t,e,i){this._cardPrefab.cardPic.node.on(t,e,i),this._cardPrefab.cardBack.node.on(t,e,i)},off:function(t,e,i){this._cardPrefab.cardPic.node.off(t,e,i),this._cardPrefab.cardBack.node.off(t,e,i)},getMoveDistance:function(){var t=this.pileX-this.x,e=this.pileY-this.y;return Math.sqrt(t*t+e*e)},destroy:function(){this._card=null,this._prefab=null,this._cardPrefab=null,this.node.destroy()}});cc._RF.pop()},{Card:"Card",CardSuite:"CardSuite"}],CardSuite:[function(t,e,i){"use strict";cc._RF.push(e,"7024dYzvElAD7Wr3f2gWbEH","CardSuite");var n={DIAMONDS:"diamonds",CLUBS:"clubs",HEARTS:"hearts",SPADES:"spades"};e.exports=n,cc._RF.pop()},{}],Card:[function(t,e,i){"use strict";function n(t,e){this.rank=t,this.suite=e,this.type="stock",this.faceUp=!1}cc._RF.push(e,"ca0711i3CJIy75NKBPr2mg/","Card"),n.TYPE_STOCK="stock",n.TYPE_WASTE="waste",n.TYPE_FOUNDATION="foundation",n.TYPE_TABLEAU="tableau",e.exports=n,cc._RF.pop()},{}],Deck:[function(t,e,i){"use strict";function n(){this.cards=[];for(var t=0;t<13;t++){var e=t+1;this.cards[t]=new a(e,o.DIAMONDS),this.cards[t+13]=new a(e,o.CLUBS),this.cards[t+26]=new a(e,o.HEARTS),this.cards[t+39]=new a(e,o.SPADES)}}cc._RF.push(e,"6f6e4/YWdhP7J5JP19XpRbk","Deck");var a=t("Card"),o=t("CardSuite");n.prototype.shuffle=function(){for(var t=this.cards.length,e=null,i=0;0!==t;)i=Math.floor(Math.random()*t),t--,e=this.cards[t],this.cards[t]=this.cards[i],this.cards[i]=e},n.prototype.getCard=function(){return 0===this.cards.length?null:this.cards.pop()},n.prototype.getRemainingCards=function(){return this.cards.splice(0)},n.prototype.count=function(){return this.cards.length},e.exports=n,cc._RF.pop()},{Card:"Card",CardSuite:"CardSuite"}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"216b77zgRNGXZjpbqeLGWso","Game");var n=t("Solitaire"),a=t("CardSprite"),o=t("Card"),r=t("Ads"),c=t("CardSuite"),s=t("autoWinAnimation"),l=null,u=null,d=null,h=!1,f=null,p=null,v=0,y=0,g=!1,C=!1,m=!1,_=!1,T=!1,P=!1,S=0;cc.Class({extends:cc.Component,ctor:function(){(l=new n).foundationOrder=[c.DIAMONDS,c.CLUBS,c.HEARTS,c.SPADES],u=new r},properties:{cardPrefab:{default:null,type:cc.Prefab},cardNode:{default:null,type:cc.Node},celebrateEffects:{default:null,type:cc.Node},congratulationText:{default:null,type:cc.Node},timeLabel:{default:null,type:cc.Label},scoreLabel:{default:null,type:cc.Label},movesLabel:{default:null,type:cc.Label},settingsButton:{default:null,type:cc.Button},newGameButton:{default:null,type:cc.Button},undoButton:{default:null,type:cc.Button},arrow:{default:null,type:cc.Button},soundButton:{default:null,type:cc.Button},oneTapButton:{default:null,type:cc.Button},threeCardsButton:{default:null,type:cc.Button},autoWinButton:{default:null,type:cc.Button},feedbackButton:{default:null,type:cc.Button},legalButton:{default:null,type:cc.Button},foundation1:{default:null,type:cc.Node},foundation2:{default:null,type:cc.Node},foundation3:{default:null,type:cc.Node},foundation4:{default:null,type:cc.Node},stock:{default:null,type:cc.Node},waste:{default:null,type:cc.Node},tableau1:{default:null,type:cc.Node},tableau2:{default:null,type:cc.Node},tableau3:{default:null,type:cc.Node},tableau4:{default:null,type:cc.Node},tableau5:{default:null,type:cc.Node},tableau6:{default:null,type:cc.Node},tableau7:{default:null,type:cc.Node}},onLoad:function(){l.addMoveCallback(this.onSolitaireMove,this),l.addWinCallback(this.onSolitaireWin,this),u.initialize(),S=(1280-cc.winSize.height)/2,this.initSettingsMenu(),this.initWinEffects(),this.initEvents();var t=this;cc.loader.loadResDir("audio",cc.AudioClip,function(){t.newGame()})},update:function(t){g&&(v+=t)>=1&&(y++,v=0,this.displayTime())},initSettingsMenu:function(){var t=this.settingsButton.getComponent("ToggleButton");t.selected=!1,this.arrow.node.active=!1,this.soundButton.node.active=!1,this.oneTapButton.node.active=!1,this.threeCardsButton.node.active=!1,this.autoWinButton.node.active=!1,this.feedbackButton.node.active=!1,this.legalButton.node.active=!1,t=this.oneTapButton.getComponent("ToggleButton"),_=t.selected,t=this.soundButton.getComponent("ToggleButton"),P=!t.selected,t=this.threeCardsButton.getComponent("ToggleButton"),T=t.selected,this.enableSettingsMenu()},initWinEffects:function(){this.congratulationText.active=!1,this.celebrateEffects.active=!1},initEvents:function(){this.stock.on(cc.Node.EventType.TOUCH_END,this.onStockHolderClick,this)},newGame:function(){l.newGame(),d=[],this.createStockPile(),this.createTableauPiles(),this.updateCardSpritesLocalZOrder(),this.deal()},createStockPile:function(){var t=l.stock,e=0,i=null,n=null;for(e=0;e<t.length;e++)i=t[e],(n=new a).parent=this.cardNode,n.card=i,n.prefab=cc.instantiate(this.cardPrefab),n.x=n.pileX=this.stock.x,n.y=n.pileY=this.stock.y-S,d.push(n),n.on(cc.Node.EventType.TOUCH_START,this.onCardTouchStart,this),n.on(cc.Node.EventType.TOUCH_MOVE,this.onCardTouchMove,this),n.on(cc.Node.EventType.TOUCH_END,this.onCardTouchEnd,this)},createTableauPiles:function(){var t=l.tableaus,e=0,i=0,n=null,o=null,r=null,c=null,s=0,u=0;for(e=0;e<7;e++)for(n=t[e],i=0;i<n.length;i++)o=n[i],s=(c=this["tableau"+(e+1)]).x,u=c.y-20*i-S,(r=new a).parent=this.cardNode,r.card=o,r.prefab=cc.instantiate(this.cardPrefab),r.x=this.stock.x,r.y=this.stock.y-S,r.dealMoveX=r.pileX=s,r.dealMoveY=r.pileY=u,o.faceUp&&r.flip(),d.push(r),r.on(cc.Node.EventType.TOUCH_START,this.onCardTouchStart,this),r.on(cc.Node.EventType.TOUCH_MOVE,this.onCardTouchMove,this),r.on(cc.Node.EventType.TOUCH_END,this.onCardTouchEnd,this)},deal:function(){this.settingsButton.interactable=!1,this.newGameButton.interactable=!1,this.undoButton.interactable=!1,this.disableSettingsMenu(),h=!0;var t=l.stock.length,e=0,i=0;this.scheduleOnce(function(){for(t=l.stock.length;t<52;t++){var n=d[t],a=.015*e;n.moveTo(n.dealMoveX,n.dealMoveY,.5,null,null,null,a),e++,i=a+.5}var o=this.playAudio("deal.mp3");this.scheduleOnce(function(){h=!1,this.stopAudio(o),this.settingsButton.interactable=!0,this.newGameButton.interactable=!0,this.enableSettingsMenu(),this.startTime()},i+.25)},.3)},updateCardSpritesLocalZOrder:function(){for(var t=0,e=l.foundations,i=l.waste,n=l.stock,a=l.tableaus,o=null,r=null,c=0;c<4;c++)for(var s=e[c],u=0;u<s.length;u++)o=s[u],(r=this.getCardSpriteByCard(o))&&(r.shadowVisible(!1),r.shadow2Visible(!1),r.zOrder=t,t++);for(c=0;c<n.length;c++)o=n[c],(r=this.getCardSpriteByCard(o))&&(r.shadowVisible(!1),r.shadow2Visible(!1),r.zOrder=t,t++);for(c=0;c<i.length;c++)o=i[c],(r=this.getCardSpriteByCard(o))&&(r.shadowVisible(!1),r.shadow2Visible(!1),r.zOrder=t,t++);if(T){var d=[];for(c=i.length-1;c>=i.length-3;c--)(o=i[c])&&d.unshift(o);for(c=0;c<d.length;c++)(r=this.getCardSpriteByCard(d[c])).shadow2Visible(c>0);d=null}for(c=6;c>=0;c--)for(var h=a[c],f=0;f<h.length;f++)o=h[f],(r=this.getCardSpriteByCard(o))&&(r.shadowVisible(f>0),r.shadow2Visible(!1),r.zOrder=t,t++)},arrangeWastePile:function(){var t=l.waste,e=t.length,i=null,n=null,a=0;if(T){var o={},r=0;for(a=e-1;a>=0;a--)(i=this.getCardSpriteByCard(t[a]))&&(n?(o.x=r<3?n.pileX-34:this.waste.x-68,o.y=this.waste.y):(o.x=this.waste.x,o.y=this.waste.y),i.pileX=o.x,i.pileY=o.y,i.x!==i.pileX||i.y!==i.pileY?i.moveTo(o.x,o.y,.25,this.updateCardSpritesLocalZOrder,this):(i.x=i.pileX,i.y=i.pileY),n=i,r++)}else for(a=0;a<e;a++)(i=this.getCardSpriteByCard(t[a]))&&(i.pileX=this.waste.x,i.pileY=this.waste.y,i.x!==i.pileX||i.y!==i.pileY?i.moveTo(i.pileX,i.pileY,.25,this.updateCardSpritesLocalZOrder,this):(i.x=i.pileX,i.y=i.pileY))},getCardSpriteByNode:function(t){for(var e=d.length,i=0;i<e;i++){var n=d[i];if(n.node===t)return n}return null},getCardSpriteByCard:function(t){for(var e=d.length,i=0;i<e;i++){var n=d[i];if(n.card===t)return n}return null},getTableauCardSpriteGroup:function(t){var e=l.findTableauByCard(t),i=e.length,n=null;if(i>0){var a=e.indexOf(t);if(a!==i-1){n=[];for(var o=a;o<i;o++){var r=this.getCardSpriteByCard(e[o]);r&&n.push(r)}return n}}return null},getCardSpriteIntersectionData:function(t,e){var i=cc.rect(t.x-t.width/2,t.y-t.height/2,t.width,t.height),n=cc.rect(),a=null,r=0;t:for(var c=d.length-1;c>=0;c--){var s=d[c];if(s!==t&&s.card.faceUp&&s.card.type!==o.TYPE_WASTE){if(e)for(var u=0;u<e.length;u++)if(s===e[u])continue t;n.x=s.x-s.width/2,n.y=s.y-s.height/2,n.width=s.width,n.height=s.height;var h=this.getRectIntersection(i,n);if(h&&l.isTopCard(s.card)){var f=h.width*h.height;f>r&&(r=f,a=s)}}}return a&&r>0?{sprite:a,area:r}:null},getSpotIntersectionData:function(t){for(var e=cc.rect(t.x-t.width/2,t.y-t.height/2,t.width,t.height),i=cc.rect(),n=null,a=null,o=0,r=0,c=null,s=0,u=0;u<4;u++){var d=this["foundation"+(u+1)];i.x=d.x-d.width/2,i.y=d.y-d.height/2,i.width=d.width,i.height=d.height,(c=this.getRectIntersection(e,i))&&0===l.foundations[u].length&&(s=c.width*c.height)>o&&(o=s,n=l.foundations[u])}for(u=0;u<7;u++){var h=this["tableau"+(u+1)];i.x=h.x-h.width/2,i.y=h.y-h.height/2,i.width=h.width,i.height=h.height,(c=this.getRectIntersection(e,i))&&0===l.tableaus[u].length&&(s=c.width*c.height)>r&&(r=s,a=l.tableaus[u])}if(n&&a){if(o>r)return{pile:n,area:o};if(r>o)return{pile:a,area:r}}else{if(n)return{pile:n,area:o};if(a)return{pile:a,area:r}}return null},getRectIntersection:function(t,e){var i=e.x,n=e.y,a=i+e.width,o=n+e.height;return t.x>i&&(i=t.x),t.y>n&&(n=t.y),t.x+t.width<a&&(a=t.x+t.width),t.y+t.height<o&&(o=t.y+t.height),a<=i||o<=n?null:cc.rect(i,n,a-i,o-n)},getPositionOnPile:function(t,e){if(e===l.stock)return{x:this.stock.x,y:this.stock.y};for(var i=0;i<4;i++){var n=this["foundation"+(i+1)];if(l.foundations[i]===e&&n)return{x:n.x,y:n.y}}for(i=0;i<7;i++){var a=l.tableaus[i];if(a===e){var o=this["tableau"+(i+1)],r=a.indexOf(t),c=this.getCardSpriteByCard(a[r-1]);return c?{x:c.pileX,y:c.pileY-(c.card.faceUp?38:20)}:{x:o.x,y:o.y}}}return null},invalidateMove:function(){function t(t){e.updateCardSpritesLocalZOrder(),t.shake()}var e=this;if(f)f.getMoveDistance()>=7?f.moveTo(f.pileX,f.pileY,.25,t,this,[f]):(this.updateCardSpritesLocalZOrder(),f.x=f.pileX,f.y=f.pileY,f.shake());else if(p)for(var i=0;i<p.length;i++){var n=p[i];n.getMoveDistance()>=7?0===i?n.moveTo(n.pileX,n.pileY,.25,t,this,[n]):n.moveTo(n.pileX,n.pileY,.25,this.updateCardSpritesLocalZOrder,this):(n.x=n.pileX,n.y=n.pileY,0===i&&(this.updateCardSpritesLocalZOrder(),n.shake()))}f=null,p=null},processMove:function(t){var e=t instanceof a?t.card:t[0].card,i=t instanceof a?t:t[0],n=null,r=null;if(e.type!==o.TYPE_STOCK||e.faceUp){var c=this.getCardSpriteIntersectionData(i,t instanceof Array?t:null),s=this.getSpotIntersectionData(i);if(c&&s?c.area>s.area?n=l.getPileByCard(c.sprite.card):s.area>c.area&&(n=s.pile):c?n=l.getPileByCard(c.sprite.card):s&&(n=s.pile),t instanceof a)r=e;else{r=[];for(var u=0;u<t.length;u++)r[u]=t[u].card}}else r=e,n=l.waste;r&&n?l.move(r,n):this.invalidateMove()},processSingleTap:function(t){if(t instanceof a)l.autoMove(t.card);else if(t instanceof Array){for(var e=[],i=0;i<t.length;i++)e[i]=t[i].card;l.autoMove(e)}},displayScore:function(){this.scoreLabel.string="Score: "+l.score},displayTime:function(){var t=y,e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=t-3600*e-60*i;e<10&&(e="0"+e),i<10&&(i="0"+i),n<10&&(n="0"+n),this.timeLabel.string=0===e||"00"===e?"Time: "+i+":"+n:"Time: "+e+":"+i+":"+n},startTime:function(){y=0,v=0,g=!0},stopTime:function(){y=0,v=0,g=!1},updateMoveCount:function(){this.undoButton.interactable=l.commands.length>0,this.movesLabel.string="Moves: "+l.moves},openSettingsMenu:function(){m=!0;var t=null,e=this.arrow.node;e.active=!0,e.opacity=127,e.runAction(cc.fadeTo(.17,255));var i=this.soundButton.node;i.active=!0,i.opacity=127,t=cc.spawn(cc.fadeTo(.17,255),cc.moveBy(.17,0,20)),i.runAction(t);var n=this.oneTapButton.node;n.active=!0,n.opacity=0,t=cc.spawn(cc.fadeTo(.17,255),cc.moveBy(.17,0,20)),n.runAction(cc.sequence(cc.delayTime(.033),cc.callFunc(function(){n.opacity=127}),t));var a=this.threeCardsButton.node;a.active=!0,a.opacity=0,t=cc.spawn(cc.fadeTo(.17,255),cc.moveBy(.17,0,20)),a.runAction(cc.sequence(cc.delayTime(.066),cc.callFunc(function(){a.opacity=127}),t));var o=this.autoWinButton.node;o.active=!0,o.opacity=0,t=cc.spawn(cc.fadeTo(.17,255),cc.moveBy(.17,0,20)),o.runAction(cc.sequence(cc.delayTime(.099),cc.callFunc(function(){o.opacity=127}),t));var r=this.feedbackButton.node;r.active=!0,r.opacity=0,t=cc.spawn(cc.fadeTo(.17,255),cc.moveBy(.17,0,20)),r.runAction(cc.sequence(cc.delayTime(.132),cc.callFunc(function(){r.opacity=127}),t));var c=this.legalButton.node;c.active=!0,c.opacity=0,t=cc.spawn(cc.fadeTo(.17,255),cc.moveBy(.17,0,20)),c.runAction(cc.sequence(cc.delayTime(.165),cc.callFunc(function(){c.opacity=127}),t,cc.callFunc(function(){m=!1})))},closeSettingsMenu:function(){m=!0;var t=null,e=this.arrow.node;e.runAction(cc.sequence(cc.fadeTo(.17,127),cc.callFunc(function(){e.active=!1})));var i=this.soundButton.node;t=cc.spawn(cc.fadeTo(.17,127),cc.moveBy(.17,0,-20)),i.runAction(cc.sequence(t,cc.callFunc(function(){i.active=!1})));var n=this.oneTapButton.node;t=cc.spawn(cc.fadeTo(.17,127),cc.moveBy(.17,0,-20)),n.runAction(cc.sequence(cc.delayTime(.033),t,cc.callFunc(function(){n.active=!1})));var a=this.threeCardsButton.node;t=cc.spawn(cc.fadeTo(.17,127),cc.moveBy(.17,0,-20)),a.runAction(cc.sequence(cc.delayTime(.066),t,cc.callFunc(function(){a.active=!1})));var o=this.autoWinButton.node;t=cc.spawn(cc.fadeTo(.17,127),cc.moveBy(.17,0,-20)),o.runAction(cc.sequence(cc.delayTime(.066),t,cc.callFunc(function(){o.active=!1})));var r=this.feedbackButton.node;t=cc.spawn(cc.fadeTo(.17,127),cc.moveBy(.17,0,-20)),r.runAction(cc.sequence(cc.delayTime(.099),t,cc.callFunc(function(){r.active=!1})));var c=this.legalButton.node;t=cc.spawn(cc.fadeTo(.17,127),cc.moveBy(.17,0,-20)),c.runAction(cc.sequence(cc.delayTime(.132),t,cc.callFunc(function(){c.active=!1,m=!1})))},enableSettingsMenu:function(){this.arrow.interactable=!0,this.soundButton.interactable=!0,this.oneTapButton.interactable=!0,this.threeCardsButton.interactable=!0,this.autoWinButton.interactable=!0,this.feedbackButton.interactable=!0,this.legalButton.interactable=!0},disableSettingsMenu:function(){this.arrow.interactable=!1,this.soundButton.interactable=!1,this.oneTapButton.interactable=!1,this.threeCardsButton.interactable=!1,this.autoWinButton.interactable=!1,this.feedbackButton.interactable=!1,this.legalButton.interactable=!1},playAudio:function(t){if(!P)return cc.audioEngine.play(cc.url.raw("resources/audio/"+t))},stopAudio:function(t){P||cc.audioEngine.stop(t)},onSolitaireMove:function(t){if(t){var e=null,i=null;if(t.card){var n=t.card;(e=this.getCardSpriteByCard(n))&&(this.playAudio("flip.mp3"),e.zOrder=d.length,t.toPile!==l.waste&&t.fromPile!==l.waste||(t.fromPile===l.stock?(this.playAudio("flip.mp3"),e.flip()):t.toPile===l.stock&&e.flip(!0),this.arrangeWastePile()),(i=this.getPositionOnPile(n,t.toPile))&&(e.pileX=i.x,e.pileY=i.y,e.moveTo(i.x,i.y,.25,function(){n.type===o.TYPE_FOUNDATION&&(e.playFx(),this.playAudio(n.rank<10?"score"+n.rank+".mp3":"score10.mp3")),this.updateCardSpritesLocalZOrder()},this)))}else if(t.cardArray){var a=t.cardArray,r=0,c=a.length;if(t.toPile===l.stock){r=c-1,this.schedule(function(){(e=this.getCardSpriteByCard(a[r]))&&(e.flip(!0),e.zOrder=d.length,e.pileX=this.stock.x,e.pileY=this.stock.y,this.playAudio("flip.mp3"),e.moveTo(this.stock.x,this.stock.y,.25)),0===--r&&(this.updateCardSpritesLocalZOrder(),this.scheduleOnce(this.updateCardSpritesLocalZOrder,.25))},.0625,c-1)}else if(t.toPile===l.waste){for(this.playAudio("flip.mp3"),r=0;r<c;r++)(e=this.getCardSpriteByCard(a[r]))&&e.flip();this.arrangeWastePile()}else for(this.playAudio("flip.mp3"),r=0;r<a.length;r++)(e=this.getCardSpriteByCard(a[r]))&&(i=this.getPositionOnPile(a[r],t.toPile))&&(e.zOrder=d.length,e.pileX=i.x,e.pileY=i.y,e.moveTo(i.x,i.y,.25,this.updateCardSpritesLocalZOrder,this))}var s=this.getCardSpriteByCard(t.openCard);if(s){var u=!t.openCard.faceUp;u||this.playAudio("flip.mp3"),s.flip(u)}this.updateMoveCount(),this.displayScore(),f=null,p=null}else this.invalidateMove()},onSolitaireWin:function(){g=!1,l.autoWin?this.scheduleOnce(function(){s.start(l,d,null,this),this.celebrateEffects.active=!0,this.celebrateEffects.y-=S;var t=this.celebrateEffects.getComponent(cc.ParticleSystem);t&&(this.playAudio("win.mp3"),t.resetSystem()),this.congratulationText.active=!0,this.congratulationText.opacity=127,this.congratulationText.runAction(cc.fadeTo(.2,255))},.5):this.scheduleOnce(function(){this.celebrateEffects.active=!0,this.celebrateEffects.y-=S;var t=this.celebrateEffects.getComponent(cc.ParticleSystem);t&&(this.playAudio("win.mp3"),t.resetSystem()),this.congratulationText.active=!0,this.congratulationText.opacity=127,this.congratulationText.runAction(cc.fadeTo(.2,255))},.5)},onCardTouchStart:function(t){if(!(h||l.win||a.animating)){var e=t.currentTarget.parent.parent,i=null;if(C=!1,f=this.getCardSpriteByNode(e),!(i=f.card)||i.type===o.TYPE_TABLEAU&&!i.faceUp||i.type===o.TYPE_WASTE&&!l.isTopCard(i))f=null,p=null;else if(i.type===o.TYPE_TABLEAU&&(p=this.getTableauCardSpriteGroup(i)),p){f=null;for(var n=0;n<p.length;n++)p[n].zOrder=d.length}else f.zOrder=d.length}},onCardTouchMove:function(t){if(!(h||l.win||a.animating)){var e=t.getDelta(),i=0;if(f)f.card.type!==o.TYPE_STOCK&&(f.shadowVisible(!0),f.x+=e.x,f.y+=e.y,i=f.getMoveDistance());else if(p){for(var n=0;n<p.length;n++){var r=p[n];r.shadowVisible(!0),r.x+=e.x,r.y+=e.y}i=p[0].getMoveDistance()}C=i>=7}},onCardTouchEnd:function(){if(!(h||l.win||a.animating)){if(C)this.processMove(f||p);else if(f){var t=f.card;t.type!==o.TYPE_STOCK||t.faceUp?_&&this.processSingleTap(f):this.processMove(f)}else _&&this.processSingleTap(p);C=!1}},onStockHolderClick:function(){if(!(h||l.win||a.animating)){for(var t=l.waste,e=[],i=0;i<t.length;i++){var n=t[i];e[i]=n}l.move(e,l.stock)}},onSettingsClick:function(){if(!(h||a.animating||m)){var t=this.settingsButton.getComponent("ToggleButton");t.selected=!t.selected,t.selected?this.openSettingsMenu():this.closeSettingsMenu()}},onNewGameClick:function(){if(!(h||a.animating||m||s.started)){y>=30&&u.showInterstitial(),S=0,this.movesLabel.string="Moves: 0",this.initWinEffects(),this.stopTime(),this.displayTime();for(var t=0;t<d.length;t++){var e=d[t];e.off(cc.Node.EventType.TOUCH_START,this.onCardTouchStart,this),e.off(cc.Node.EventType.TOUCH_MOVE,this.onCardTouchMove,this),e.off(cc.Node.EventType.TOUCH_END,this.onCardTouchEnd,this),e.destroy()}d=null,this.cardNode.removeAllChildren(!0),this.newGame()}},onUndoClick:function(){h||l.win||a.animating||m||l.undo()},onSoundClick:function(){if(!m){var t=this.soundButton.getComponent("ToggleButton");t.selected=!t.selected,P=!t.selected}},on1TapClick:function(){if(!m){var t=this.oneTapButton.getComponent("ToggleButton");t.selected=!t.selected,_=t.selected}},on3CardsClick:function(){if(!m&&!a.animating){var t=this.threeCardsButton.getComponent("ToggleButton");t.selected=!t.selected,T=t.selected,l.win||this.arrangeWastePile()}},onAutoWinClick:function(){if(!m&&!a.animating){var t=this.autoWinButton.getComponent("ToggleButton");t.selected=!t.selected,l.autoWin=t.selected}},onFeedbackClick:function(){m||console.log("feedback")},onLegalClick:function(){m||console.log("legal")}}),cc._RF.pop()},{Ads:"Ads",Card:"Card",CardSprite:"CardSprite",CardSuite:"CardSuite",Solitaire:"Solitaire",autoWinAnimation:"autoWinAnimation"}],Solitaire:[function(t,e,i){"use strict";function n(){this.stock=null,this.waste=null,this.foundations=null,this.tableaus=null}cc._RF.push(e,"19122U2tzNKK6ttXa8UdTb7","Solitaire");var a=t("Deck"),o=t("Card"),r=t("CardSuite"),c=0,s=0,l=!1,u=null,d=null,h=null,f=null,p=null,v=!0,y=!1,g=null,C=!0;n.prototype.addMoveCallback=function(t,e){u=t,d=e},n.prototype.addWinCallback=function(t,e){h=t,f=e},n.prototype.newGame=function(){this.waste=[],this.foundations=[[],[],[],[]],this.tableaus=[[],[],[],[],[],[],[]];var t=new a;t.shuffle();for(var e=1;e<=7;e++)for(var i=0;i<e;i++){var n=t.getCard();n.type=o.TYPE_TABLEAU,this.tableaus[e-1].push(n),i===e-1&&(n.faceUp=!0)}this.stock=t.getRemainingCards(),c=0,s=0,l=!1,p=v?[]:null},n.prototype.move=function(t,e){if(t&&e){var i=null;t.type===o.TYPE_STOCK?i=y?this._draw3Stock(t):this._moveStock(t):t instanceof Array&&this._isStockPile(e)?i=this._refreshStock(t):t.type===o.TYPE_WASTE?i=this._moveWaste(t,e):t.type===o.TYPE_FOUNDATION?i=this._moveFoundation(t,e):(t.type===o.TYPE_TABLEAU||t instanceof Array)&&(i=this._moveTableau(t,e)),this._processCommand(i)}},n.prototype.autoMove=function(t){if(t){var e=null,i=null,n=null,a=0;if(t.type===o.TYPE_WASTE){for(a=0;a<this.foundations.length&&(i=this.foundations[a],!(e=this._moveWaste(t,i)));a++);if(!e)for(a=0;a<this.tableaus.length&&(n=this.tableaus[a],!(e=this._moveWaste(t,n)));a++);}else if(t.type===o.TYPE_FOUNDATION){for(a=0;a<this.tableaus.length&&(n=this.tableaus[a],!(e=this._moveFoundation(t,n)));a++);if(!e){var r=this.findFoundationByCard(t);for(a=0;a<this.foundations.length&&(i=this.foundations[a],r===i||!(e=this._moveFoundation(t,i)));a++);}}else if(t.type===o.TYPE_TABLEAU||t instanceof Array){for(a=0;a<this.foundations.length&&(i=this.foundations[a],!(e=this._moveTableau(t,i)));a++);if(!e){var c=this.findTableauByCard(t);for(a=0;a<this.tableaus.length&&(n=this.tableaus[a],c===n||!(e=this._moveTableau(t,n)));a++);}}this._processCommand(e)}},n.prototype.undo=function(){if(v){var t=p.pop();t&&(s++,c-=t.score,t.undo(),this._callMoveCallback(t))}},n.prototype.findFoundationByCard=function(t){for(var e=0;e<4;e++)for(var i=this.foundations[e],n=0;n<i.length;n++)if(i[n]===t)return i;return null},n.prototype.findTableauByCard=function(t){for(var e=0;e<7;e++)for(var i=this.tableaus[e],n=0;n<i.length;n++)if(i[n]===t)return i;return null},n.prototype.getPileByCard=function(t){return t.type===o.TYPE_STOCK?this.stock:t.type===o.TYPE_WASTE?this.waste:t.type===o.TYPE_FOUNDATION?this.findFoundationByCard(t):t.type===o.TYPE_TABLEAU?this.findTableauByCard(t):null},n.prototype.getTopCardFromPile=function(t){return t.length>0?t[t.length-1]:null},n.prototype.isTopCard=function(t){var e=this.findFoundationByCard(t),i=this.findTableauByCard(t);return e?e.indexOf(t)===e.length-1:i?i.indexOf(t)===i.length-1:t.type===o.TYPE_STOCK&&this.stock.indexOf(t)===this.stock.length-1||t.type===o.TYPE_WASTE&&this.waste.indexOf(t)===this.waste.length-1},n.prototype.isFoundationPile=function(t){return this._isFoundationPile(t)},n.prototype.isTableauPile=function(t){return this._isTableauPile(t)},n.prototype._processCommand=function(t){t?(s++,t.execute(),t.openCard&&(t.score+=5),(c+=t.score)<0&&(c=0),this._saveCommand(t),this._callMoveCallback(t),(l=this._checkWin())&&h&&h.call(f)):this._callMoveCallback(null)},n.prototype._saveCommand=function(t){v&&p&&p.push(t)},n.prototype._createMoveCommand=function(t,e,i,n){var a=this;return{card:t,toPile:e,fromPile:i,openCard:null,score:0,execute:function(){var r=a._getPileType(e);t.type=r,t.faceUp=r!==o.TYPE_STOCK,e.push(t),a._removeFromPile(t,i),n&&(this.openCard=a.getTopCardFromPile(i),this.openCard&&!this.openCard.faceUp?this.openCard.faceUp=!0:this.openCard=null)},undo:function(){var e=this.toPile;this.toPile=this.fromPile,this.fromPile=e;var i=a._getPileType(this.toPile);t.type=i,t.faceUp=i!==o.TYPE_STOCK,this.toPile.push(t),a._removeFromPile(t,this.fromPile),this.openCard&&(this.openCard.faceUp=!1)}}},n.prototype._createMoveGroupCommand=function(t,e,i,n){var a=this;return{cardArray:t,toPile:e,fromPile:i,openCard:null,score:0,execute:function(){for(var r=a._getPileType(e),c=r!==o.TYPE_STOCK,s=0;s<t.length;s++){var l=t[s];l.type=r,l.faceUp=c,e.push(l),a._removeFromPile(l,i)}n&&(this.openCard=a.getTopCardFromPile(i),this.openCard&&!this.openCard.faceUp?this.openCard.faceUp=!0:this.openCard=null)},undo:function(){var e=this.toPile;this.toPile=this.fromPile,this.fromPile=e;for(var i=a._getPileType(this.toPile),n=i!==o.TYPE_STOCK,r=0;r<t.length;r++){var c=t[r];c.type=i,c.faceUp=n,this.toPile.push(c),a._removeFromPile(c,this.fromPile)}this.openCard&&(this.openCard.faceUp=!1)}}},n.prototype._createRefreshStockCommand=function(t,e,i){var n=this;return{cardArray:t,toPile:e,fromPile:i,score:0,execute:function(){for(var a=t.length-1;a>=0;a--){var r=t[a];r.type=o.TYPE_STOCK,r.faceUp=!1,e.push(r),n._removeFromPile(r,i)}},undo:function(){var e=this.toPile;this.toPile=this.fromPile,this.fromPile=e;for(var i=0;i<t.length;i++){var a=t[i];a.type=o.TYPE_WASTE,a.faceUp=!0,this.toPile.push(a),n._removeFromPile(a,this.fromPile)}}}},n.prototype._createDraw3Command=function(t,e,i){var n=this;return{cardArray:t,toPile:e,fromPile:i,score:0,execute:function(){for(var a=0;a<t.length;a++){var r=t[a];r.type=o.TYPE_WASTE,r.faceUp=!0,e.push(r),n._removeFromPile(r,i)}},undo:function(){var e=this.toPile;this.toPile=this.fromPile,this.fromPile=e;for(var i=t.length-1;i>=0;i--){var a=t[i];a.type=o.TYPE_STOCK,a.faceUp=!1,this.toPile.push(a),n._removeFromPile(a,this.fromPile)}}}},n.prototype._moveStock=function(t){return this._createMoveCommand(t,this.waste,this.stock)},n.prototype._draw3Stock=function(t){for(var e=this.stock.indexOf(t),i=e-2,n=[],a=null,o=e;o>=i;o--)(a=this.stock[o])&&n.push(a);return this._createDraw3Command(n,this.waste,this.stock)},n.prototype._refreshStock=function(t){var e=this._createRefreshStockCommand(t,this.stock,this.waste);return e.score=-100,e},n.prototype._moveWaste=function(t,e){t&&e||this._callMoveCallback(null);var i=null,n=this.getTopCardFromPile(e);return n?this._canMoveToCard(t,n)&&(i=this._createMoveCommand(t,e,this.waste)):(1===t.rank&&this._isFoundationPile(e)&&this._canMoveToFoundation(t,e)||13===t.rank&&this._isTableauPile(e))&&(i=this._createMoveCommand(t,e,this.waste)),i&&(this._isTableauPile(e)?i.score=5:this._isFoundationPile(e)&&(i.score=10)),i},n.prototype._moveFoundation=function(t,e){t&&e||this._callMoveCallback(null);var i=null,n=this.getTopCardFromPile(e);return n?!this._isFoundationPile(e)&&this._canMoveToCard(t,n)&&(i=this._createMoveCommand(t,e,this.getPileByCard(t))):(1===t.rank&&this._isFoundationPile(e)&&this._canMoveToFoundation(t,e)||13===t.rank&&this._isTableauPile(e))&&(i=this._createMoveCommand(t,e,this.getPileByCard(t))),i&&this._isTableauPile(e)&&(i.score=-15),i},n.prototype._moveTableau=function(t,e){var i=null,n=null,a=null;if(t instanceof Array&&(i=t),i){var o=i[0];(a=this.getTopCardFromPile(e))&&this._isTableauPile(e)?this._canMoveToCard(o,a)&&(n=this._createMoveGroupCommand(i,e,this.getPileByCard(o),!0)):13===o.rank&&this._isTableauPile(e)&&(n=this._createMoveGroupCommand(i,e,this.getPileByCard(o),!0))}else(a=this.getTopCardFromPile(e))&&(this._isFoundationPile(e)||this._isTableauPile(e))?this._canMoveToCard(t,a)&&(n=this._createMoveCommand(t,e,this.getPileByCard(t),!0)):(1===t.rank&&this._isFoundationPile(e)&&this._canMoveToFoundation(t,e)||13===t.rank&&this._isTableauPile(e))&&(n=this._createMoveCommand(t,e,this.getPileByCard(t),!0));return n&&this._isFoundationPile(e)&&(n.score=10),n},n.prototype._canMoveToCard=function(t,e){if(!t||!e)return!1;if(e.type===o.TYPE_FOUNDATION){if(t.rank-1===e.rank&&t.suite===e.suite)return!0}else if(t.rank===e.rank-1){if(!(t.suite!==r.HEARTS&&t.suite!==r.DIAMONDS||e.suite!==r.CLUBS&&e.suite!==r.SPADES))return!0;if(!(t.suite!==r.CLUBS&&t.suite!==r.SPADES||e.suite!==r.HEARTS&&e.suite!==r.DIAMONDS))return!0}return!1},n.prototype._canMoveToFoundation=function(t,e){return!g||g.indexOf(t.suite)===this.foundations.indexOf(e)},n.prototype._getPileType=function(t){return this._isStockPile(t)?o.TYPE_STOCK:this._isWastePile(t)?o.TYPE_WASTE:this._isFoundationPile(t)?o.TYPE_FOUNDATION:this._isTableauPile(t)?o.TYPE_TABLEAU:null},n.prototype._removeFromPile=function(t,e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)},n.prototype._isStockPile=function(t){return this.stock===t},n.prototype._isWastePile=function(t){return this.waste===t},n.prototype._isFoundationPile=function(t){for(var e=0;e<4;e++)if(this.foundations[e]===t)return!0;return!1},n.prototype._isTableauPile=function(t){for(var e=0;e<7;e++)if(this.tableaus[e]===t)return!0;return!1},n.prototype._callMoveCallback=function(t){u&&u.call(d,t)},n.prototype._checkWin=function(){var t=0;if(!C){for(t=0;t<4;t++)if(this.foundations[t].length<13)return!1;return!0}if(0===this.stock.length){var e=null;for(t=0;t<7;t++){e=this.tableaus[t];for(var i=0;i<e.length;i++)if(!e[i].faceUp)return!1}return!0}return!1},Object.defineProperty(n.prototype,"score",{get:function(){return c}}),Object.defineProperty(n.prototype,"moves",{get:function(){return s}}),Object.defineProperty(n.prototype,"commands",{get:function(){return p}}),Object.defineProperty(n.prototype,"win",{get:function(){return l}}),Object.defineProperty(n.prototype,"autoWin",{get:function(){return C},set:function(t){(C=t)&&!l&&(l=this._checkWin())&&h&&h.call(f)}}),Object.defineProperty(n.prototype,"undoable",{get:function(){return v},set:function(t){v=t}}),Object.defineProperty(n.prototype,"draw3",{get:function(){return y},set:function(t){y=t}}),Object.defineProperty(n.prototype,"foundationOrder",{get:function(){return g},set:function(t){g=t}}),e.exports=n,cc._RF.pop()},{Card:"Card",CardSuite:"CardSuite",Deck:"Deck"}],ToggleButton:[function(t,e,i){"use strict";cc._RF.push(e,"a46daHajTNG9LALpvc4KjVP","ToggleButton"),cc.Class({extends:cc.Component,ctor:function(){this._isSelected=!0},properties:{selected:{type:cc.Boolean,get:function(){return this._isSelected},set:function(t){this._isSelected=t,this.node.getComponent(cc.Sprite).spriteFrame=this._isSelected?this.onFrame:this.offFrame}},onFrame:{default:null,type:cc.SpriteFrame},offFrame:{default:null,type:cc.SpriteFrame}}}),cc._RF.pop()},{}],autoWinAnimation:[function(t,e,i){"use strict";cc._RF.push(e,"6a569PEzo5AKYXCCAnT3fR2","autoWinAnimation");var n={started:!1,start:function(t,e,i,n){this.started=!0,this._solitaire=t,this._cardSprites=e,this._callback=i,this._target=n,this._numCards=this._cardSprites.length,this._p=cc.p(0,0),this._rankCompletedArray=[],this._currentSuite=0,this._numCompleted=0;for(var a=0;a<4;a++){var o=this._solitaire.foundations[a],r=this._solitaire.getTopCardFromPile(o);this._rankCompletedArray[a]=r?r.rank:0;for(var c=0;c<o.length;c++){var s=o[c],l=this.findCardSprite(s.rank,s.suite);l&&(l.zOrder=this._numCompleted,this._numCompleted++)}}this.moveCard()},moveCard:function(){var t=this,e=this._rankCompletedArray[this._currentSuite],i=null;if(e<=13){this._rankCompletedArray[this._currentSuite]=++e;var n=this._solitaire.foundationOrder[this._currentSuite];if(i=this.findCardSprite(e,n)){this._numCompleted++,i.zOrder=this._numCompleted;var a=this._target["foundation"+(this._currentSuite+1)];this._p.x=a.x,this._p.y=a.y,i.node.runAction(cc.moveTo(.2,this._p))}}++this._currentSuite>=4&&(this._currentSuite=0),this._numCompleted<this._numCards?i?this._target.scheduleOnce(function(){t.moveCard()},.13):this.moveCard():this._target.scheduleOnce(function(){t.started=!1,t._callback&&t._callback.call(t._target)},.2)},findCardSprite:function(t,e){for(var i=0;i<this._numCards;i++){var n=this._cardSprites[i];if(n.card.rank===t&&n.card.suite===e)return n}return null}};e.exports=n,cc._RF.pop()},{}]},{},["Ads","Card","CardPrefab","CardSprite","CardSuite","Deck","Game","Solitaire","ToggleButton","autoWinAnimation"]);